
/** 
 * 
 * @author Kenan Allakhverdiev-kenan.allakhverdiev@ogr.sakarya.edu.tr
 * @since 09.05.2018
 * <p>  
 *  Odev 4
 * </p>  
 */



/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package odev.pkg4thread;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

/**
 *
 * @author kenan
 */
public class Odev4Thread {

    /**
     * @param args the command line arguments
     * @throws java.lang.InterruptedException
     */
    public static void main(String[] args) throws InterruptedException {
            Sayi sayi1=new Sayi("878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977878979878979778789798789797787897987897977");
            Sayi sayi2=new Sayi("240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894949849240005456468989494984924000545646898949498492400054564689894");
            int kalik,sutunT,kalikT=0,sonucHane;
            String sonuc = "";
            Sayi crpmSnc=new Sayi(new String[sayi2.length()]);
            
            
            
            //Paralel hesaplama-------------------------------------------------
            ExecutorService havuz=Executors.newFixedThreadPool(2);
            long baslangic = System.nanoTime(); 
            
            for (int i = sayi2.length()-1; i >= 0; i--) 
            {
                crpmSnc.sayilar[i]="";
                kalik=0;
                havuz.execute(new CarpmaIslemi(sayi1, sayi2,i,kalik,crpmSnc));
            }
            havuz.shutdown();
            while(!havuz.isTerminated()){  }
            
            for (int i = 0; i < crpmSnc.sayilar.length; i++)
                {
                    if(crpmSnc.sayilar[i].length()<=sayi1.length())
                        crpmSnc.sayilar[i]="0"+crpmSnc.sayilar[i];//sayilari 0 larla tamamlayip satir sutunda gezerek toplamak icin
                }
            
            for (int i = sayi1.length(); i >=0 ; i--) 
            {
                sutunT=0;
                for (int j=0;j<crpmSnc.sayilar.length;j++) 
                {
                    sutunT += Integer.valueOf(String.valueOf(crpmSnc.sayilar[j].charAt(i)));
                }
                    sonucHane=sutunT%10+kalikT;
                    kalikT=sutunT/10;
                    sonuc=sonucHane+sonuc;
                    if(i==0 && kalikT!=0)
                    {
                        sonuc=kalikT+sonuc;
                    }
            }
            long bitis = System.nanoTime();
            double sure = (bitis-baslangic)/1000000.0;
            
            File dosyaYaz=new File("Sonuc.txt");
            try{
                PrintWriter write;
                write = new PrintWriter(new BufferedWriter(new FileWriter(dosyaYaz,true)));
                    write.println(sonuc);
                    write.println("!Ayırma-------------------------------------!");
                write.flush();
                write.close();
            }catch(IOException ex)
            {
                System.out.println("Sistem Hatasi : "+ ex);
            }

            System.out.println("Paralel : "+String.format("%.2f", sure) + " milisaniye.");
            //------------------------------------------------------------------
            
            
            
            
            //Seri hesaplama----------------------------------------------------
            sonuc="";
            ExecutorService havuz2=Executors.newFixedThreadPool(1);
            long baslangic2 = System.nanoTime(); 
            
            for (int i = sayi2.length()-1; i >= 0; i--) 
            {
                crpmSnc.sayilar[i]="";
                kalik=0;
                havuz2.execute(new CarpmaIslemi(sayi1, sayi2,i,kalik,crpmSnc));
            }
            havuz2.shutdown();
            while(!havuz2.isTerminated()){  }
            
            for (int i = 0; i < crpmSnc.sayilar.length; i++)
                {
                    if(crpmSnc.sayilar[i].length()<=sayi1.length())
                        crpmSnc.sayilar[i]="0"+crpmSnc.sayilar[i];//sayilari 0 larla tamamlayip satir sutunda gezerek toplamak icin
                }
            
            for (int i = sayi1.length(); i >=0 ; i--) 
            {
                sutunT=0;
                for (int j=0;j<crpmSnc.sayilar.length;j++) 
                {
                    sutunT += Integer.valueOf(String.valueOf(crpmSnc.sayilar[j].charAt(i)));
                }
                    sonucHane=sutunT%10+kalikT;
                    kalikT=sutunT/10;
                    sonuc=sonucHane+sonuc;
                    if(i==0 && kalikT!=0)
                    {
                        sonuc=kalikT+sonuc;
                    }
            }
            long bitis2 = System.nanoTime();
            double sure2 = (bitis2-baslangic2)/1000000.0;
            System.out.println("Seri : "+String.format("%.2f", sure2) + " milisaniye.");
            //------------------------------------------------------------------
            
            
            
            System.out.print("Sonuc hesaplandı.Dosyaya bakınız.");
    }
}
